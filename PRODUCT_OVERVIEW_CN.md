# Claude Code UI - 产品概述

## 产品定位

Claude Code UI 是一个**跨平台的 AI 编程助手统一界面**，为开发者提供随时随地访问 Claude Code、Cursor CLI 和 OpenAI Codex 的能力。通过现代化的 Web 技术，将命令行工具转化为直观、响应式的图形界面，支持桌面和移动设备。

## 核心价值主张

### 🌐 随处可用
- **跨设备访问**：在桌面、平板、手机上无缝使用
- **PWA 支持**：添加到主屏幕，像原生应用一样运行
- **响应式设计**：自动适配不同屏幕尺寸

### 🤖 多 AI 集成
- **统一界面**：一个应用管理多个 AI 助手
- **灵活切换**：根据任务选择最合适的 AI（Claude/Cursor/Codex）
- **会话管理**：保存和恢复所有对话历史

### 💼 完整工作流
- **项目管理**：自动发现和组织代码项目
- **文件编辑**：内置代码编辑器，支持语法高亮
- **Git 集成**：查看变更、提交代码、切换分支
- **终端访问**：集成终端，直接执行命令

### 🔒 安全可控
- **权限管理**：精细控制 AI 可以使用的工具
- **身份验证**：支持多用户和 API 密钥验证
- **本地优先**：数据存储在本地，保护隐私

## 主要功能

### 1. 智能对话界面

**实时流式响应**
- WebSocket 实时通信
- 消息增量渲染
- 支持 Markdown 和代码块
- 数学公式渲染（KaTeX）

**工具调用可视化**
- 显示 AI 使用的工具
- 展示工具输入和输出
- 支持工具权限审批

**会话保护系统**
- 对话期间暂停自动更新
- 防止消息丢失
- 保持对话连续性

### 2. 项目和会话管理

**自动项目发现**
- 扫描 `~/.claude/projects/` 目录
- 显示项目元数据和会话数
- 支持手动添加项目

**会话组织**
- 按项目分组会话
- 显示会话创建和更新时间
- 支持会话重命名和删除

**实时同步**
- 文件系统监控（Chokidar）
- 自动刷新项目列表
- WebSocket 推送更新

### 3. 代码编辑和浏览

**文件树浏览器**
- 树形结构展示
- 支持展开/折叠
- 显示文件类型图标
- 过滤隐藏文件

**代码编辑器**
- CodeMirror 6 引擎
- 多语言语法高亮
- 代码折叠和缩进
- 实时保存

**文件操作**
- 读取和编辑文件
- 保存更改到磁盘
- 查看二进制文件（图片）
- 路径安全验证

### 4. Git 版本控制

**状态查看**
- 当前分支显示
- 未暂存文件列表
- 已暂存文件列表
- 文件变更统计

**变更管理**
- 暂存/取消暂存文件
- 查看文件差异
- 提交变更
- 切换分支

**差异对比**
- 并排差异视图
- 语法高亮
- 行号对齐
- 变更标记

### 5. 集成终端

**伪终端支持**
- node-pty 完整终端功能
- xterm.js 终端模拟器
- 支持颜色和格式化
- 复制粘贴支持

**会话管理**
- 持久化终端会话
- 30 分钟超时清理
- 多终端支持
- 会话恢复

### 6. 工具权限系统

**默认安全**
- 所有工具默认禁用
- 需要用户明确启用
- 防止意外操作

**细粒度控制**
- 单独启用/禁用每个工具
- 显示工具描述
- 保存权限设置

**审批流程**
- AI 使用工具前请求批准
- 显示工具输入参数
- 支持"记住我的选择"

### 7. TaskMaster 集成（可选）

**AI 驱动的项目管理**
- 从 PRD 生成任务
- 智能任务分解
- 依赖关系管理

**可视化任务板**
- 看板视图
- 拖拽排序
- 进度跟踪

**实时协作**
- WebSocket 同步
- 多用户支持
- 状态更新通知

### 8. MCP 服务器管理

**服务器配置**
- 添加和删除 MCP 服务器
- 配置服务器参数
- 启用/禁用服务器

**状态监控**
- 连接状态显示
- 自动重连
- 错误提示

**扩展功能**
- 通过 MCP 扩展 AI 能力
- 支持自定义工具
- 社区插件生态

## 技术架构

### 前端技术栈

```
React 18          - UI 框架
React Router      - 路由管理
Tailwind CSS      - 样式框架
CodeMirror 6      - 代码编辑器
xterm.js          - 终端模拟器
WebSocket         - 实时通信
Vite              - 构建工具
```

### 后端技术栈

```
Node.js           - 运行时
Express.js        - Web 框架
WebSocket (ws)    - 实时通信
SQLite3           - 数据库
node-pty          - 伪终端
Chokidar          - 文件监控
bcrypt            - 密码加密
JWT               - 身份验证
```

### 系统架构

```
┌─────────────────┐
│   React UI      │  ← 用户界面
└────────┬────────┘
         │ HTTP/WebSocket
┌────────▼────────┐
│  Express API    │  ← REST API + WebSocket
└────────┬────────┘
         │
    ┌────┴────┬────────┬────────┐
    │         │        │        │
┌───▼───┐ ┌──▼──┐ ┌───▼───┐ ┌──▼──┐
│Claude │ │Cursor│ │Codex  │ │SQLite│
│  SDK  │ │ CLI │ │  SDK  │ │  DB  │
└───────┘ └─────┘ └───────┘ └─────┘
```

## 部署方式

### 1. NPX 一键运行（推荐）

```bash
npx @siteboon/claude-code-ui
```

**优点：**
- 无需安装
- 自动更新
- 快速启动

### 2. 全局安装

```bash
npm install -g @siteboon/claude-code-ui
claude-code-ui
```

**优点：**
- 命令简短
- 离线可用
- 性能更好

### 3. PM2 后台服务

```bash
pm2 start claude-code-ui --name "claude-code-ui"
pm2 startup
pm2 save
```

**优点：**
- 后台运行
- 自动重启
- 系统启动自动运行
- 日志管理

### 4. 本地开发

```bash
git clone https://github.com/siteboon/claudecodeui.git
cd claudecodeui
npm install
npm run dev
```

**优点：**
- 源码访问
- 自定义修改
- 热重载开发

## 使用场景

### 场景 1：移动开发

**问题：** 在通勤途中想要查看代码或与 AI 讨论问题

**解决方案：**
1. 在手机浏览器打开应用
2. 添加到主屏幕（PWA）
3. 选择项目和会话
4. 与 AI 对话或查看代码

### 场景 2：远程协作

**问题：** 团队成员需要共同访问 AI 助手

**解决方案：**
1. 在服务器上部署应用
2. 配置多用户账户
3. 团队成员通过浏览器访问
4. 共享项目和会话

### 场景 3：多设备工作流

**问题：** 在不同设备间切换工作

**解决方案：**
1. 在桌面开始对话
2. 在平板上继续编辑
3. 在手机上查看进度
4. 所有设备自动同步

### 场景 4：AI 工具对比

**问题：** 不确定哪个 AI 更适合当前任务

**解决方案：**
1. 在同一界面切换 AI 提供商
2. 对比不同 AI 的响应
3. 选择最佳方案
4. 保存所有对话历史

## 安全和隐私

### 数据存储

- **本地优先**：所有数据存储在用户本地
- **无云同步**：不上传到第三方服务器
- **用户控制**：完全掌控自己的数据

### 身份验证

- **密码加密**：bcrypt 加密存储
- **JWT 令牌**：安全的会话管理
- **API 密钥**：可选的额外验证层

### 权限控制

- **工具权限**：精细控制 AI 可用工具
- **文件访问**：限制在项目目录内
- **审批流程**：敏感操作需要确认

## 性能优化

### 前端优化

- **代码分割**：按需加载组件
- **虚拟滚动**：处理长列表
- **防抖节流**：优化频繁操作
- **Service Worker**：缓存静态资源

### 后端优化

- **文件监控防抖**：减少不必要的更新
- **WebSocket 批处理**：优化消息传输
- **数据库索引**：加速查询
- **会话清理**：自动释放资源

### 网络优化

- **流式传输**：实时显示 AI 响应
- **消息压缩**：减少带宽使用
- **连接复用**：减少握手开销
- **心跳保持**：维持 WebSocket 连接

## 扩展性

### 插件系统

- **MCP 协议**：标准化的扩展接口
- **自定义工具**：添加新的 AI 工具
- **社区插件**：共享和使用社区扩展

### API 集成

- **RESTful API**：标准的 HTTP 接口
- **WebSocket API**：实时通信接口
- **Webhook**：事件通知机制

### 主题定制

- **亮色/暗色主题**：内置主题切换
- **自定义样式**：Tailwind CSS 配置
- **组件覆盖**：自定义 UI 组件

## 社区和支持

### 开源项目

- **GitHub**：https://github.com/siteboon/claudecodeui
- **许可证**：GNU GPL v3.0
- **贡献指南**：欢迎提交 PR

### 文档资源

- **README**：快速入门指南
- **API 文档**：完整的 API 参考
- **故障排除**：常见问题解答

### 更新和维护

- **自动更新检查**：GitHub Releases
- **版本通知**：应用内提示
- **一键更新**：`cloudcli update` 命令

## 未来规划

### 短期目标（3-6 个月）

- [ ] 增强移动端体验
- [ ] 添加更多语言支持
- [ ] 优化性能和稳定性
- [ ] 扩展 MCP 插件生态

### 中期目标（6-12 个月）

- [ ] 团队协作功能
- [ ] 云端同步选项
- [ ] 高级分析和洞察
- [ ] 企业级功能

### 长期愿景

- [ ] 成为 AI 编程助手的标准界面
- [ ] 建立活跃的开发者社区
- [ ] 支持更多 AI 提供商
- [ ] 打造完整的开发工作流平台

## 竞争优势

### vs 命令行工具

✅ **图形界面**：更直观易用  
✅ **移动支持**：随时随地访问  
✅ **多设备**：跨设备无缝切换  
✅ **可视化**：更好的信息展示  

### vs 其他 GUI 工具

✅ **多 AI 支持**：统一管理多个 AI  
✅ **完整工作流**：集成编辑、Git、终端  
✅ **开源免费**：无使用限制  
✅ **本地优先**：保护数据隐私  

### vs Web IDE

✅ **轻量级**：快速启动  
✅ **AI 优先**：专注 AI 辅助开发  
✅ **离线可用**：不依赖云服务  
✅ **灵活部署**：本地或远程  

## 总结

Claude Code UI 是一个**现代化、跨平台的 AI 编程助手统一界面**，通过以下特点为开发者提供价值：

1. **随处可用**：桌面、平板、手机全覆盖
2. **多 AI 集成**：Claude、Cursor、Codex 统一管理
3. **完整工作流**：对话、编辑、Git、终端一体化
4. **安全可控**：本地优先、权限管理、数据隐私
5. **开源免费**：GPL v3.0 许可证，社区驱动

无论是个人开发者还是团队协作，无论是桌面开发还是移动办公，Claude Code UI 都能提供流畅、高效的 AI 辅助编程体验。
